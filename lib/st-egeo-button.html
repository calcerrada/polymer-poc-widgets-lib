<dom-module id="st-egeo-button">
    <!--<link rel="import" type="css" href="button.css">-->
    <template>
        <style>

        </style>
        <button type="[[type]]" id$="{{buttonId}}"
                class$="{{buttonClass}}"
                role="button" tabindex="[[tabindex]]">

            <i hidden$="{{!iconLeft}}" class$="egeo-c-icon [[iconLeft]]"></i>
            <span hidden$="[[rounded]]">{{label}}</span>

            <i hidden$="{{iconRight}}" class$="egeo-c-icon {{iconRight}}"></i>

            <div hidden$="{{!hasPopover}}" class="egeo-c-popover__arrow egeo-c-popover__arrow--top"></div>

            <div hidden$="{{!hasPopover}}" class="egeo-c-popover__arrow-shadow egeo-c-popover__arrow-shadow--top"></div>
        </button>
    </template>
    <script>
        Polymer({
            is: 'st-egeo-button',
            properties: {
                buttonId: String,
                atRight: Boolean,
                iconLeft: String,
                iconRight: String,
                label: String,
                popover: String,
                rounded: {type: Boolean, value: false},
                small: Boolean,
                xxsmall: Boolean,
                tabindex: Number,
                type: String,
                modifier: {
                    type: String, value: ''
                },
                hasPopover: {type: Boolean, value: false},
                isOpenPopover: {type: Boolean, value: false},
                isPopoverInitialized: {type: Boolean, value: false}
            },

            ready: function () {
                this.buttonClass = this.getButtonClass();
            },
            getButtonClass: function () {
                var componentClass = "egeo-c-button egeo-c-button--" + this.modifier;
                if (this.rounded) {
                    return componentClass + ' egeo-c-button--rounded'
                }
                if (this.small) {
                    return componentClass + ' egeo-c-button--small'
                }
                if (this.xxsmall) {
                    return componentClass + ' egeo-c-button--xxsmall'
                }
                if (this.atRight) {
                    return componentClass + ' egeo-u-float--right'
                }
                return componentClass;

            }

//            togglePopover: function() {
//                if (this.isOpenPopover) {
//                    this.closePopover();
//                } else {
//                    this.openPopover();
//                }
//            },
//            openPopover: function() {
//                if (!this.isPopoverInitialized) {
//                    this.initializePopover();
//                }
//                this.getPopover().addClass('egeo-c-popover--open');
//                this.getPopoverArrow().addClass('egeo-c-popover__arrow--open');
//                this.getPopoverArrowShadow().addClass('egeo-c-popover__arrow-shadow--open');
//                this.isOpenPopover = true;
//            },
//
//            closePopover: function() {
//                this.getPopover().removeClass('egeo-c-popover--open');
//                this.getPopoverArrow().removeClass('egeo-c-popover__arrow--open');
//                this.getPopoverArrowShadow().removeClass('egeo-c-popover__arrow-shadow--open');
//                this.isOpenPopover = false;
//            },
//
//            initializePopover: function() {
//                this.getPopover().bind('mouseleave', this.closePopover);
//            },
//
//            getPopover: function() {
//                if (!this.popover) {
//                    this.popover = document.getElementById(this.$.parent().find('[data-id="' + this.popover + '"]'));
//                }
//
//                return this.popover;
//            },
//
//            getPopoverArrow: function() {
//                if (!this.popoverArrow) {
//                    this.$ = document.getElementById(this.$[0]);
//                    this.popoverArrow = angular.element(this.$.find('.egeo-c-popover__arrow'));
//                }
//
//                return this.popoverArrow;
//            },
//
//            getPopoverArrowShadow: function() {
//                if (!this.popoverArrowShadow) {
//                    this.popoverArrowShadow = angular.element(this.$.find('.egeo-c-popover__arrow-shadow'));
//                }
//                return this.popoverArrowShadow;
//            }
        });
    </script>
</dom-module>