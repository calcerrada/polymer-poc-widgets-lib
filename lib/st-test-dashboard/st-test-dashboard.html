<dom-module is="st-test-dashboard">
    <template>
        <content id="myContent"></content>
        <st-ajax></st-ajax>
    </template>
</dom-module>
<script>
    Polymer({
        is: "st-test-dashboard",
        properties: {
            data: {
                type: Array,
                value: []
            }
        },
        ready: function () {
            document.addEventListener('google-chart-select', (function (event) {
                this.handleWidgetClick(event);
            }).bind(this));
        },
        attached: function () {
            this.spreadDataToWidgets(this.data);
        },
        spreadDataToWidgets: function (data) {
            var widgets = this.getWidgets();
            for (var i = 0; i < widgets.length; i++) {
                widgets[i].data = data;
            }
        },
        getWidgets: function () {
            return Polymer.dom(this).children;
        },
        handleWidgetClick: function (event) {
            var summary = {};
            summary.column = event.detail.selection[0].column;
            summary.row = event.detail.selection[0].row;
            summary.value = this.data[summary.row + 1];
            console.log(summary);
        }

    })
    ;
</script>


